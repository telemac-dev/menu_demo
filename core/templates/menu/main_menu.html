<!-- core/templates/menu/main_menu.html -->
{% load menu_tags %}

<ul class="nav flex-column">
    {% for item in menu_items %}
        <li class="nav-item">
            {% if item|has_children %}
                <a class="nav-link {% is_active item.url %}" 
                   data-bs-toggle="collapse" 
                   href="#submenu-{{ forloop.counter }}" 
                   role="button">
                    <i class="fas {{ item.icon }} me-2"></i>
                    {{ item.name }}
                    <i class="fas fa-angle-down float-end mt-1"></i>
                </a>
                <div class="collapse" id="submenu-{{ forloop.counter }}">
                    <div class="submenu">
                        {% render_submenu item.children %}
                    </div>
                </div>
            {% else %}
                <a class="nav-link {% is_active item.url %}" href="{% url item.url %}">
                    <i class="fas {{ item.icon }} me-2"></i>
                    {{ item.name }}
                </a>
            {% endif %}
        </li>
    {% endfor %}
</ul>
